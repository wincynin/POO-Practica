MASTER REQUIREMENTS SPECIFICATION (E1 + E2 + E3)

=== 1. ENTITIES & LOGIC ===

A. PRODUCTS
   1. Standard Product: ID, Name (<100 chars), Category, Price.
      - Categories: MERCH (0% disc), STATIONERY (5%), CLOTHES (7%), BOOK (10%), ELECTRONICS (3%).
      - Discount applies if >= 2 units of same category in ticket.
   2. Services (E3):
      - ID: Sequential number ending in 'S' (e.g., "1S").
      - No Price/Name initially. Only "Max Usage Date".
      - Types: Transport, Shows, Insurance.
   3. Special Products (E2):
      - Food: Price/person, Expiration Date, Max People (requires 3 days notice).
      - Meeting: Price/person, Expiration Date, Max People (requires 12h notice).
      - Customizable: Base Product + list of texts. Price = Base + (10% * num_texts).

B. USERS (E2/E3)
   1. Cashier: Name, Email (company), ID ("UW" + 7 random digits).
   2. Client: Name, Email, ID (DNI for Individual, NIF for Company).
      - Registered by a specific Cashier.

C. TICKETS (E3 Logic)
   1. Common Ticket: 
      - For Individual Clients (DNI).
      - Contains only Products.
   2. Company Ticket:
      - For Company Clients (NIF).
      - Can contain: Services ONLY, or Mixed (Products + Services).
      - Logic:
         - Service Only: No prices/discounts printed.
         - Mixed: 15% discount on products for EACH service included.
         - Cannot close Mixed ticket if it lacks at least 1 Product and 1 Service.
   3. General Ticket Rules:
      - ID: "YY-MM-dd-HH:mm-" + 5 random digits. Updates on close.
      - States: EMPTY, ACTIVE, CLOSED.
      - Only the creating Cashier can modify/close/print.

D. PERSISTENCE (E3)
   - System must save state to local files and recover on startup.

=== 2. COMMAND LIST ===

A. USERS
   - client add "<name>" <DNI|NIF> <email> <cashId> 
     (Detects Company vs Individual based on NIF/DNI format)
   - client remove <id>
   - client list
   - cash add [<id>] "<name>" <email>
   - cash remove <id>
   - cash list
   - cash tickets <id> (Shows ID and State of tickets created by cashier)

B. PRODUCTS
   - prod add [<id>] "<name>" <category> <price> [<maxPers>] 
     (If maxPers exists, it's customizable)
   - prod update <id> NAME|CATEGORY|PRICE <value>
   - prod remove <id>
   - prod list
   - prod addFood [<id>] "<name>" <price> <expiration:yyyy-MM-dd> <max_people>
   - prod addMeeting [<id>] "<name>" <price> <expiration:yyyy-MM-dd> <max_people>
   - prod add <expiration:yyyy-MM-dd> <category> (For Services E3)

C. TICKETS
   - ticket new [<id>] <cashId> <userId> -[c/p/s] 
     (Flags: c=combined, p=product/default, s=service. Must inject visualization strategy)
   - ticket add <ticketId> <cashId> <prodId> <amount> [--p<txt> --p<txt>]
   - ticket remove <ticketId> <cashId> <prodId>
   - ticket print <ticketId> <cashId> 
     (Closes ticket. Output format depends on Client Type & Ticket Type)
   - ticket list (Ordered by Cashier ID)

D. SYSTEM
   - help
   - echo "<text>"
   - exit